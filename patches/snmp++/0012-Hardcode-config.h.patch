From e1f3d58c3e41f93b0fba50e0ebbc50f23794a86e Mon Sep 17 00:00:00 2001
From: Martin Jolicoeur <snmpb1@gmail.com>
Date: Sun, 20 Aug 2017 22:15:32 -0400
Subject: [PATCH 12/12] Hardcode config.h

Original commit message by Martin:

> Replaced autoconf with static config (building for Windows,Linux,BSD,MacOSX)

My change in this patch: define's for snmp++ version 3.3.10 â†’ 3.3.11.
---
 config.h                         | 431 +++++++++++++++++++++++++++++++
 include/snmp_pp/config_snmp_pp.h |  10 +-
 libsnmp.h                        |  31 ++-
 3 files changed, 458 insertions(+), 14 deletions(-)
 create mode 100644 config.h

diff --git a/config.h b/config.h
new file mode 100644
index 0000000..c557f54
--- /dev/null
+++ b/config.h
@@ -0,0 +1,431 @@
+/* config.h.  Generated from config.h.in by configure.  */
+/* config.h.in.  Generated from configure.ac by autoheader.  */
+
+/* Define if you want the debug output support compiled in. */
+#define DEBUG 1
+
+/* Defines default log profile to use */
+#define DEFAULT_LOG_PROFILE "original"
+
+/* Define if you want the thread support compiled in. */
+#define ENABLE_THREADS 1
+
+/* Define to 1 if you have the <arpa/inet.h> header file. */
+#ifndef PLATFORM_WINDOWS
+#define HAVE_ARPA_INET_H 1
+#endif
+
+/* Define to 1 if you have the `clock_gettime' function. */
+#ifndef PLATFORM_MACOSX
+#define HAVE_CLOCK_GETTIME 1
+#endif
+
+/* Define to 1 if you have the <ctype.h> header file. */
+#define HAVE_CTYPE_H 1
+
+/* Define to 1 if you have the declaration of `getaddrinfo', and to 0 if you
+   don't. */
+/* #undef HAVE_DECL_GETADDRINFO */
+
+/* Define to 1 if you have the <dlfcn.h> header file. */
+#ifndef PLATFORM_WINDOWS
+#define HAVE_DLFCN_H 1
+#endif
+
+/* Define to 1 if you have the <errno.h> header file. */
+#define HAVE_ERRNO_H 1
+
+/* Define to 1 if you have the <float.h> header file. */
+#define HAVE_FLOAT_H 1
+
+/* Define if getaddrinfo is there */
+#define HAVE_GETADDRINFO 1
+
+/* Define to 1 if you have the `gethostbyaddr' function. */
+#define HAVE_GETHOSTBYADDR 1
+
+/* Define to 1 if you have the `gethostbyaddr_r' function. */
+#if !defined(PLATFORM_MACOSX) && !defined(PLATFORM_WINDOWS)
+#define HAVE_GETHOSTBYADDR_R 1
+#endif
+
+/* Define to 1 if you have the `gethostbyname' function. */
+#define HAVE_GETHOSTBYNAME 1
+
+/* Define to 1 if you have the `gethostbyname2' function. */
+#ifndef PLATFORM_WINDOWS
+#define HAVE_GETHOSTBYNAME2 1
+#endif
+
+/* Define to 1 if you have the `gethostbyname_r' function. */
+#if !defined(PLATFORM_MACOSX) && !defined(PLATFORM_WINDOWS)
+#define HAVE_GETHOSTBYNAME_R 1
+#endif
+
+/* Define to 1 if you have the `gethostname' function. */
+#define HAVE_GETHOSTNAME 1
+
+/* Define to 1 if you have the `getpid' function. */
+#define HAVE_GETPID 1
+
+/* Define to 1 if you have the `gettimeofday' function. */
+#define HAVE_GETTIMEOFDAY 1
+
+/* Define to 1 if you have the `htonl' function. */
+#define HAVE_HTONL 1
+
+/* Define to 1 if you have the `inet_aton' function. */
+#ifndef PLATFORM_WINDOWS
+#define HAVE_INET_ATON 1
+#endif
+
+/* Define to 1 if you have the `inet_ntoa' function. */
+#define HAVE_INET_NTOA 1
+
+#ifndef PLATFORM_WINDOWS
+
+/* Define to 1 if you have the `inet_ntop' function. */
+#define HAVE_INET_NTOP 1
+
+/* Define to 1 if you have the `inet_pton' function. */
+#define HAVE_INET_PTON 1
+
+#endif
+
+/* Define to 1 if you have the <inttypes.h> header file. */
+#ifndef PLATFORM_BSD
+#define HAVE_INTTYPES_H 1
+#endif
+
+/* Define to 1 if you have the <io.h> header file. */
+#ifdef PLATFORM_WINDOWS
+#define HAVE_IO_H 1
+#endif
+
+/* Define to 1 if you have the `isdigit' function. */
+#define HAVE_ISDIGIT 1
+
+/* Define when libdes.h shall be favored over des.h */
+/* #undef HAVE_LIBDES_H */
+
+#ifdef PLATFORM_WINDOWS
+/* Define to 1 if you have the `ws2_32' library (-lws2_32). */
+#define HAVE_LIBWS2_32 1
+
+/* Define to 1 if you have the `wsock32' library (-lwsock32). */
+#define HAVE_LIBWSOCK32 1
+#endif
+
+/* Define to 1 if you have the <limits.h> header file. */
+#define HAVE_LIMITS_H 1
+
+/* Define to 1 if you have the `localtime_r' function. */
+#ifndef PLATFORM_WINDOWS
+#define HAVE_LOCALTIME_R 1
+#endif
+
+/* Define to 1 if you have the `malloc' function. */
+#define HAVE_MALLOC 1
+
+/* Define to 1 if you have the <memory.h> header file. */
+#define HAVE_MEMORY_H 1
+
+/* Define to 1 if you have the `memset' function. */
+#define HAVE_MEMSET 1
+
+/* define if the compiler implements namespaces */
+#define HAVE_NAMESPACES /**/
+
+/* Define if g++ supports namespace std. */
+#define HAVE_NAMESPACE_STD /**/
+
+#ifndef PLATFORM_WINDOWS
+/* Define to 1 if you have the <netdb.h> header file. */
+#define HAVE_NETDB_H 1
+
+/* Define to 1 if you have the <netinet/in.h> header file. */
+#define HAVE_NETINET_IN_H 1
+
+/* Define to 1 if you have the `poll' function. */
+#define HAVE_POLL 1
+
+/* Define to 1 if you have the <poll.h> header file. */
+#define HAVE_POLL_H 1
+
+#else
+
+/* Define to 1 if you have the <process.h> header file. */
+#define HAVE_PROCESS_H 1
+#endif
+
+/* Define if you have POSIX threads libraries and header files. */
+#ifndef PLATFORM_WINDOWS
+#define HAVE_PTHREAD 1
+#endif
+
+/* Define to 1 if you have the `realloc' function. */
+#define HAVE_REALLOC 1
+
+/* Define to 1 if you have the `select' function. */
+#define HAVE_SELECT 1
+
+/* Define to 1 if you have the <signal.h> header file. */
+#define HAVE_SIGNAL_H 1
+
+/* Define to 1 if you have the `socket' function. */
+#define HAVE_SOCKET 1
+
+/* define if the compiler supports ISO C++ standard library */
+#define HAVE_STD /**/
+
+/* Define to 1 if stdbool.h conforms to C99. */
+#define HAVE_STDBOOL_H 1
+
+/* Define if g++ supports C++0x features. */
+#define HAVE_STDCXX_0X /**/
+
+/* Define to 1 if you have the <stdint.h> header file. */
+#define HAVE_STDINT_H 1
+
+/* Define to 1 if you have the <stdio.h> header file. */
+#define HAVE_STDIO_H 1
+
+/* Define to 1 if you have the <stdlib.h> header file. */
+#define HAVE_STDLIB_H 1
+
+/* define if the compiler supports Standard Template Library */
+#define HAVE_STL /**/
+
+/* Define to 1 if you have the `strcasecmp' function. */
+#define HAVE_STRCASECMP 1
+
+/* Define to 1 if you have the `strchr' function. */
+#define HAVE_STRCHR 1
+
+/* Define to 1 if you have the `strerror' function. */
+#define HAVE_STRERROR 1
+
+/* Define to 1 if you have the `stricmp' function. */
+#ifdef PLATFORM_WINDOWS
+#define HAVE_STRICMP 1
+#endif
+
+/* Define to 1 if you have the <strings.h> header file. */
+#define HAVE_STRINGS_H 1
+
+/* Define to 1 if you have the <string.h> header file. */
+#define HAVE_STRING_H 1
+
+/* Define to 1 if you have the `strstr' function. */
+#define HAVE_STRSTR 1
+
+/* Define to 1 if the system has the type `struct sockaddr_in6'. */
+#define HAVE_STRUCT_SOCKADDR_IN6 1
+
+/* Define to 1 if `ss_family' is a member of `struct sockaddr_storage'. */
+#define HAVE_STRUCT_SOCKADDR_STORAGE_SS_FAMILY 1
+
+/* Define to 1 if `__ss_family' is a member of `struct sockaddr_storage'. */
+/* #undef HAVE_STRUCT_SOCKADDR_STORAGE___SS_FAMILY */
+
+/* Define to 1 if you have the <sys/param.h> header file. */
+#define HAVE_SYS_PARAM_H 1
+
+/* Define to 1 if you have the <sys/select.h> header file. */
+#ifndef PLATFORM_WINDOWS
+#define HAVE_SYS_SELECT_H 1
+
+/* Define to 1 if you have the <sys/socket.h> header file. */
+#define HAVE_SYS_SOCKET_H 1
+#endif
+
+/* Define to 1 if you have the <sys/stat.h> header file. */
+#define HAVE_SYS_STAT_H 1
+
+/* Define to 1 if you have the <sys/timeb.h> header file. */
+#define HAVE_SYS_TIMEB_H 1
+
+/* Define to 1 if you have the <sys/time.h> header file. */
+#define HAVE_SYS_TIME_H 1
+
+/* Define to 1 if you have the <sys/types.h> header file. */
+#define HAVE_SYS_TYPES_H 1
+
+/* Define to 1 if you have the <sys/unistd.h> header file. */
+#define HAVE_SYS_UNISTD_H 1
+
+/* define if the compiler supports basic templates */
+#define HAVE_TEMPLATES /**/
+
+/* Define to 1 if you have the <time.h> header file. */
+#define HAVE_TIME_H 1
+
+/* Define to 1 if you have the <unistd.h> header file. */
+#define HAVE_UNISTD_H 1
+
+#ifdef PLATFORM_WINDOWS
+/* Define to 1 if you have the <winsock2.h> header file. */
+#define HAVE_WINSOCK2_H 1
+
+/* Define to 1 if you have the <winsock.h> header file. */
+#define HAVE_WINSOCK_H 1
+
+/* Define to 1 if you have the <ws2tcpip.h> header file. */
+#define HAVE_WS2TCPIP_H 1
+
+/* Define to 1 if you have the <wspiapi.h> header file. */
+#define HAVE_WSPIAPI_H 1
+#endif
+
+/* _XOPEN_SOURCE $HAVE_XOPEN_SOURCE */
+#define HAVE_XOPEN_SOURCE
+
+/* Define to 1 if the system has the type `_Bool'. */
+#define HAVE__BOOL 1
+
+/* Define to 1 if you have the `_getpid' function. */
+#ifdef PLATFORM_WINDOWS
+#define HAVE__GETPID 1
+#endif
+
+/* Define to the sub-directory in which libtool stores uninstalled libraries.
+   */
+#define LT_OBJDIR ".libs/"
+
+/* Define to be the name of the operating system. */
+#define OS_TYPE "generic"
+
+/* Name of package */
+#define PACKAGE "snmp++"
+
+/* Define to the address where bug reports for this package should be sent. */
+#define PACKAGE_BUGREPORT "support@agentpp.com"
+
+/* Define to the full name of this package. */
+#define PACKAGE_NAME "snmp++"
+
+/* Define to the full name and version of this package. */
+#define PACKAGE_STRING "snmp++ 3.3.11"
+
+/* Define to the one symbol short name of this package. */
+#define PACKAGE_TARNAME "snmp++"
+
+/* Define to the home page for this package. */
+#define PACKAGE_URL ""
+
+/* Define to the version of this package. */
+#define PACKAGE_VERSION "3.3.11"
+
+/* Define to necessary symbol if this constant uses a non-standard name on
+   your system. */
+/* #undef PTHREAD_CREATE_JOINABLE */
+
+/* define SNMP_PP_IPv6 if you want to use IPv6 */
+#define SNMP_PP_IPv6 1
+
+/* Determine what socket length (socklen_t) data type is */
+#ifdef PLATFORM_WINDOWS
+#define SNMP_SOCKLEN_T
+#else
+#define SNMP_SOCKLEN_T socklen_t
+#endif
+
+/* Define if ISO C++ 0x header files are present. */
+#ifndef PLATFORM_MACOSX
+#define STDCXX_0X_HEADERS /**/
+#endif
+
+/* Define if ISO C++ 1998 header files are present. */
+#define STDCXX_98_HEADERS /**/
+
+/* Define if ISO C++ TR1 header files are present. */
+#ifndef PLATFORM_MACOSX
+#define STDCXX_TR1_HEADERS /**/
+#endif
+
+/* Define to 1 if you have the ANSI C header files. */
+#define STDC_HEADERS 1
+
+/* Version number of package */
+#define VERSION "3.3.11"
+
+/* define _NO_SNMPv3 if you do not want to use SNMPv3 */
+/* #undef _NO_SNMPv3 */
+
+/* define _SNMPv3 if you want to use SNMPv3 */
+#define _SNMPv3 1
+
+/* Define for Solaris 2.5.1 so the uint32_t typedef from <sys/synch.h>,
+   <pthread.h>, or <semaphore.h> is not used. If the typedef were allowed, the
+   #define below would cause a syntax error. */
+/* #undef _UINT32_T */
+
+/* Define for Solaris 2.5.1 so the uint64_t typedef from <sys/synch.h>,
+   <pthread.h>, or <semaphore.h> is not used. If the typedef were allowed, the
+   #define below would cause a syntax error. */
+/* #undef _UINT64_T */
+
+/* Define for Solaris 2.5.1 so the uint8_t typedef from <sys/synch.h>,
+   <pthread.h>, or <semaphore.h> is not used. If the typedef were allowed, the
+   #define below would cause a syntax error. */
+/* #undef _UINT8_T */
+
+/* Define to `int' if <sys/types.h> doesn't define. */
+#ifdef PLATFORM_WINDOWS
+#define gid_t int
+#endif
+
+/* Define to `__inline__' or `__inline' if that's what the C compiler
+   calls it, or to nothing if 'inline' is not supported under any name.  */
+#ifndef __cplusplus
+/* #undef inline */
+#endif
+
+/* Define to the type of a signed integer type of width exactly 16 bits if
+   such a type exists and the standard includes do not define it. */
+/* #undef int16_t */
+
+/* Define to the type of a signed integer type of width exactly 32 bits if
+   such a type exists and the standard includes do not define it. */
+/* #undef int32_t */
+
+/* Define to the type of a signed integer type of width exactly 64 bits if
+   such a type exists and the standard includes do not define it. */
+/* #undef int64_t */
+
+/* Define to the type of a signed integer type of width exactly 8 bits if such
+   a type exists and the standard includes do not define it. */
+/* #undef int8_t */
+
+/* Define to `long int' if <sys/types.h> does not define. */
+/* #undef off_t */
+
+/* Define to `int' if <sys/types.h> does not define. */
+/* #undef pid_t */
+
+/* Define to `unsigned int' if <sys/types.h> does not define. */
+/* #undef size_t */
+
+/* Define to `int' if <sys/types.h> does not define. */
+/* #undef ssize_t */
+
+/* Define to `int' if <sys/types.h> doesn't define. */
+#ifdef PLATFORM_WINDOWS
+#define uid_t 1
+#endif
+
+/* Define to the type of an unsigned integer type of width exactly 16 bits if
+   such a type exists and the standard includes do not define it. */
+/* #undef uint16_t */
+
+/* Define to the type of an unsigned integer type of width exactly 32 bits if
+   such a type exists and the standard includes do not define it. */
+/* #undef uint32_t */
+
+/* Define to the type of an unsigned integer type of width exactly 64 bits if
+   such a type exists and the standard includes do not define it. */
+/* #undef uint64_t */
+
+/* Define to the type of an unsigned integer type of width exactly 8 bits if
+   such a type exists and the standard includes do not define it. */
+/* #undef uint8_t */
diff --git a/include/snmp_pp/config_snmp_pp.h b/include/snmp_pp/config_snmp_pp.h
index 92a2065..3f8b3c9 100644
--- a/include/snmp_pp/config_snmp_pp.h
+++ b/include/snmp_pp/config_snmp_pp.h
@@ -71,10 +71,10 @@
 #else
 #define _NO_THREADS
 #endif
-#if 1
+#if 0
 #define HAVE_LIBSSL 1
 #endif
-#if 0
+#if 1
 #define HAVE_LIBTOMCRYPT 1
 #endif
 #if 0
@@ -85,7 +85,7 @@
 #endif
 
 // define SNMP_PP_NAMESPACE to enclose all library names in Snmp_pp namespace
-#if 1
+#if 0
 #define SNMP_PP_NAMESPACE
 #else
 #undef SNMP_PP_NAMESPACE
@@ -94,7 +94,9 @@
 // If you do not use SNMP++ for commercial purposes or if you
 // have licensed IDEA (read README.v3) you may define the following
 // to enable IDEA support. (note this is not defined by a rfc)
-// #define _USE_IDEA
+#define _USE_IDEA
+
+#define _USE_3DES_EDE
 
 #if defined(_SNMPv3) || !defined(_NO_SNMPv3)
 #  if defined(HAVE_LIBSSL)
diff --git a/libsnmp.h b/libsnmp.h
index 25fbd75..82fda26 100644
--- a/libsnmp.h
+++ b/libsnmp.h
@@ -27,9 +27,20 @@
 #ifndef __LIBSNMP_H_INCLUDED__
 #define __LIBSNMP_H_INCLUDED__
 
-#ifdef HAVE_CONFIG_H
-#include <config.h>
+#if defined(_WIN32) || defined(_WIN64) || defined(WIN32)
+#define PLATFORM_WINDOWS
+#elif defined(__APPLE__) && defined(__MACH__)
+#define PLATFORM_MACOSX
+#elif defined(__unix__)
+#include <sys/param.h>
+#if defined(BSD)
+#define PLATFORM_BSD
+#define __unix
+#else
+#define PLATFORM_LINUX /* Assume all others (if any) are like linux */
+#endif
 #endif
+#include <config.h>
 
 #if 1
 # include <sys/types.h>
@@ -106,12 +117,12 @@
 #include <sys/timeb.h> // and _ftime
 #endif
 
-#if 0
+#ifdef PLATFORM_WINDOWS
 # include <winsock2.h>
-# if 0
+# if 1
 #  include <ws2tcpip.h>
 # endif
-# if 0
+# if 1
 #  include <wspiapi.h>
 # endif
 #elif 0
@@ -132,18 +143,18 @@
 # endif
 #endif
 
-#if 1
+#ifndef PLATFORM_WINDOWS
 # include <poll.h>
 #endif
-#if 1
+#ifndef PLATFORM_WINDOWS
 # include <sys/select.h>
 #endif
 
-#ifdef _WIN32
-# if 0
+#ifdef PLATFORM_WINDOWS
+# if 1
 #  include <io.h>
 # endif
-# if 0
+# if 1
 #  include <process.h>
 # endif
 # include <windows.h>
-- 
2.27.0

