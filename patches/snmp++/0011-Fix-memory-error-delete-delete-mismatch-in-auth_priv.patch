From 33087b55aec85c7589a5617aef820208adf33951 Mon Sep 17 00:00:00 2001
From: max ulidtko <ulidtko@gmail.com>
Date: Sun, 14 Jun 2020 00:59:42 +0300
Subject: [PATCH 11/11] Fix memory error, delete/delete[] mismatch in
 auth_priv.cpp

commit 7de2d2579f56add284ddc87874353f4abd829e29
Author: Max ulidtko <ulidtko@gmail.com>
Date:   Thu Nov 29 18:36:25 2018 +0200
---
 src/auth_priv.cpp | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/src/auth_priv.cpp b/src/auth_priv.cpp
index 7f1b20c..04493e5 100644
--- a/src/auth_priv.cpp
+++ b/src/auth_priv.cpp
@@ -2281,8 +2281,8 @@ int AuthSHABase::auth_out_msg(const unsigned char *key,
   int block_size = h->get_block_size();
   int key_len    = h->get_key_length();
   unsigned char digest[SNMPv3_AP_MAXLENGTH_AUTHPARAM];
-  std::auto_ptr<unsigned char> ipad(new unsigned char[block_size]);
-  std::auto_ptr<unsigned char> opad(new unsigned char[block_size]);
+  std::unique_ptr<unsigned char[]> ipad(new unsigned char[block_size]);
+  std::unique_ptr<unsigned char[]> opad(new unsigned char[block_size]);
   unsigned char *k_ipad = ipad.get(); /* inner padding - key XORd with ipad */
   unsigned char *k_opad = opad.get(); /* outer padding - key XORd with opad */
 
-- 
2.17.1

